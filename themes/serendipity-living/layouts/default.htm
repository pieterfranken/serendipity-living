[projectsMenu]
==
<!DOCTYPE html>
<html lang="en">
<head>
    {% partial 'seo/meta' %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

    {% styles %}
    <link href="/themes/serendipity-living/assets/css/app.css?v={{ random() }}" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
</head>
<body class="sl-body">
    {% partial 'header' %}
    <aside class="sl-nav-panel" aria-hidden="true">
        <nav class="sl-nav" aria-label="Primary">
            {% component 'projectsMenu' %}
        </nav>
    </aside>
    <div class="sl-nav-overlay" data-nav-close aria-hidden="true"></div>


    <main id="content">
        {% page %}
    </main>

    {% partial 'footer' %}

    {% framework extras %}
    {% scripts %}
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const body = document.body;
        const panel = document.querySelector('.sl-nav-panel');
        const overlay = document.querySelector('.sl-nav-overlay');
        const toggles = [ ...document.querySelectorAll('[data-burger]') ];
        const open = () => body.classList.add('sl-nav-open');
        const close = () => body.classList.remove('sl-nav-open');
        const toggle = () => body.classList.toggle('sl-nav-open');
        toggles.forEach(el => el.addEventListener('click', toggle));
        overlay && overlay.addEventListener('click', () => { close(); document.dispatchEvent(new CustomEvent('sl:nav:close')); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { close(); document.dispatchEvent(new CustomEvent('sl:nav:close')); } });
      });
    </script>

</body>
</html>

      <script>
        // Make Projects act as a toggle (no navigation) in both header and slide-in panel.
        (function(){
          const delegate = (root, selector, type, handler) => {
            root.addEventListener(type, e => {
              const el = e.target.closest(selector);
              if (el && root.contains(el)) handler(e, el);
            });
          };
          const body = document.body;
          const toggleItem = (item, expand) => {
            const btn = item.querySelector('.sl-nav__toggle');
            const dd = item.querySelector('.sl-dropdown');
            const isOpen = expand ?? item.classList.contains('open');
            item.classList.toggle('open', !isOpen);
            if (btn) btn.setAttribute('aria-expanded', String(!isOpen));
            // Dropdown visibility handled via CSS in panel context; this helps keyboard users in header context.
            if (dd) dd.style.display = (!isOpen ? 'block' : '');
          };
          // Click toggles
          delegate(document, '.sl-nav__item .sl-nav__toggle', 'click', (e, btn) => {
            e.preventDefault();
            const item = btn.closest('.sl-nav__item');
            if (item) toggleItem(item);
          });
          // Close dropdown when nav closes
          document.addEventListener('sl:nav:close', () => {
            document.querySelectorAll('.sl-nav__item.open').forEach(i => toggleItem(i, true));
          });
        })();
      </script>

